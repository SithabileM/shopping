{%extends 'monde/layout.html'%}
{%block head%}
{%load static%}
<link rel="stylesheet" type="text/css" href="{%static "css/home.css"%}">
<script>
    window.addEventListener('beforeunload',function(){
        document.forms[0].submit.disabled=true;
    });
    document.addEventListener("DOMContentLoaded",()=>{
        const menuButton=document.getElementById("menu-button");
        const menu=document.getElementById("menu");
        const mainContent= document.getElementById("main-content")
        menuButton.addEventListener("click",()=>{
            mainContent.classList.toggle("menu-open");
            menu.classList.toggle("visible");
        });
    });

</script>
{%endblock%}

{%block body%}
<button id="menu-button">Open cart</button><br>
<nav id="menu" style="overflow: auto; width: 200px; height: 500px;">
    {%for i,v in cart_data.items%}
    <div>
    <img src="/media/{{i}}" alt="cart item" style="width:200px; height:200px;">
    <form method="get" action="remove">
        <input type="hidden" name="item" value="{{i}}">
        <input type="submit" value="Remove from cart">
    </form>
    {%for val in v%}
    <p>{{val}}</P>
    {%endfor%}
    </div>
    {%endfor%}
    <p>{{subtotal}}</p>
    <form action="checkout" method="get">
        <input type="hidden" name="cartItems" value="{{cart_data}}">
        <input type="hidden" name="subtotal" value="{{subtotal}}">
        <input type="submit" value="Proceed to checkout">
    </form>
</nav>

<main id="main-content">
    <h1 id="welcome">Welcome {{user}}</h1>
    <form action='' method="post">
        {% csrf_token %}
        <input type="text" name="search" placeholder="Search for items...">
        <input type="submit" value="Search">
    </form>
    <a href="sell">sell Page</a><br>
{%if obj%}
<h3>Successfully Loaded: {{img_obj.description}}
<img src="{{obj.image.url}}" alt="{{image.description}}">
{% endif %}

{%for secName, secItems in sectionData.items%}
{%if secItems%}
<h2 style='color:rgb(255,0,150);'>{{secName}} Section</h2>
{%endif%}
<div style="width:1100px; overflow-x:auto; display:flex;">
    {%for item in secItems%}
        <div style="display: inline-block;">
            <a href="{{item.id}}" ? "clothing_id"={{item.id}}><img src="{{item.image.url}}" alt="{{item.name}}" style="width: 200px; height: 200px; margin: 10px; hover:black;"></a>
            <p>{{item.shortDescription}}</p> 
            <p>${{item.price}}</p>
        </div>
    {%endfor%}

    </div>
{%endfor%}
</main>

{%endblock%}